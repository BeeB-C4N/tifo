<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TIFO - è¦³å…‰AIã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒªãƒ¼</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans JP', sans-serif;
            background-color: #FFFBF5; /* æ¸©ã‹ã¿ã®ã‚ã‚‹ã‚¯ãƒªãƒ¼ãƒ è‰² */
            color: #5C4033; /* æ¿ƒã„èŒ¶è‰² */
        }
        .tifo-card {
            background-color: white;
            border-radius: 1.5rem; /* è§’ã‚’ä¸¸ã */
            padding: 1.5rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.05), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            border: 1px solid #F3EADF;
            transition: all 0.3s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }
        .tifo-button {
            background-color: #FFB347; /* çŒ«ã®ã‚¤ãƒ¡ãƒ¼ã‚¸ã«åˆã†ã‚ªãƒ¬ãƒ³ã‚¸ */
            color: white;
            font-weight: bold;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            border-bottom: 4px solid #E69500;
            transition: all 0.2s ease;
        }
        .tifo-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 12px -3px rgba(255, 179, 71, 0.4);
        }
        .tifo-button:active {
            transform: translateY(2px);
            border-bottom-width: 2px;
        }
        .rank-badge {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: white;
        }
        .rank-1 { background-color: #FFD700; } /* Gold */
        .rank-2 { background-color: #C0C0C0; } /* Silver */
        .rank-3 { background-color: #CD7F32; } /* Bronze */
        .rank-4, .rank-5 { background-color: #A9A9A9; } /* Gray */
        .progress-bar-bg {
            background-color: #F3EADF;
            border-radius: 9999px;
            overflow: hidden;
            height: 0.75rem;
        }
        .progress-bar {
            background-color: #87CEEB; /* æº€è¶³åº¦ã®ãƒãƒ¼ã®è‰² */
            height: 100%;
            border-radius: 9999px;
            transition: width 0.5s ease-in-out;
        }
        .nps-bar-container {
            position: relative;
            background: linear-gradient(to right, #FFC0CB, #F3EADF, #98FB98);
            height: 0.75rem;
            border-radius: 9999px;
        }
        .nps-bar-marker {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 2px;
            height: 1.25rem;
            background-color: rgba(92, 64, 51, 0.5);
            border-radius: 1px;
        }
        .nps-bar-value {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            width: 0.75rem;
            height: 0.75rem;
            background-color: #5C4033;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 0 5px rgba(0,0,0,0.3);
            transition: left 0.5s ease-in-out;
        }
    </style>
</head>
<body>

    <!-- ãƒ›ãƒ¼ãƒ ç”»é¢ -->
    <div id="home-screen" class="min-h-screen flex flex-col items-center justify-center p-4 text-center">
        <div class="w-24 h-24 mb-4">
            <svg viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                <path fill="#FFB347" d="M47.9,-51.9C62.4,-41.2,74.7,-25.9,78.2,-8.1C81.7,9.7,76.4,30.1,64.8,44.2C53.2,58.3,35.3,66.1,17.7,70.8C0.1,75.5,-17.2,77.1,-33.1,70.2C-49,63.3,-63.5,47.9,-71.4,30.1C-79.3,12.3,-80.6,-7.8,-74.3,-24.1C-68,-40.4,-54.1,-52.9,-38.8,-60.1C-23.5,-67.3,-6.8,-69.2,8.9,-66.1C24.6,-63,47.9,-51.9,47.9,-51.9Z" transform="translate(100 100)" />
                <text x="50%" y="55%" text-anchor="middle" dominant-baseline="middle" font-size="50" font-weight="bold" fill="white" letter-spacing="2">TIFO</text>
            </svg>
        </div>
        <h1 class="text-4xl font-bold mb-2">TIFO</h1>
        <p class="text-lg text-stone-600 mb-8">è¦³å…‰AIã‚¢ãƒ‰ãƒã‚¤ã‚¶ãƒªãƒ¼</p>
        
        <div id="loading-message" class="text-stone-600">
            <p>ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚“ã§ã„ã¾ã™...</p>
        </div>

        <div id="main-content" class="w-full max-w-md hidden">
            <label for="facility-select" class="block mb-2 text-stone-700 font-bold">åˆ†æã—ãŸã„æ–½è¨­ã‚’é¸ã‚“ã§ã«ã‚ƒã‚“ ğŸ¾</label>
            <select id="facility-select" class="w-full p-3 border border-stone-300 rounded-xl shadow-sm focus:ring-2 focus:ring-orange-400 focus:border-orange-400">
                <!-- Options are generated by JS -->
            </select>
            <button id="analyze-button" class="tifo-button w-full mt-6">ãƒ‡ãƒ¼ã‚¿ã‚’åˆ†æ</button>
        </div>
    </div>

    <!-- åˆ†æçµæœç”»é¢ -->
    <div id="analysis-screen" class="hidden p-4 md:p-8 max-w-5xl mx-auto">
        <header class="flex items-center justify-between mb-8">
            <h1 id="facility-title" class="text-3xl font-bold text-stone-800"></h1>
            <button id="back-button" class="tifo-button">æˆ»ã‚‹</button>
        </header>

        <main class="space-y-8">
            <!-- ã‚¹ã‚³ã‚¢ã‚«ãƒ¼ãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section>
                <h2 class="text-2xl font-bold mb-4 flex items-center">ğŸ“Š åŸºæœ¬ã‚¹ã‚³ã‚¢</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <!-- å›ç­”æ•°ã‚«ãƒ¼ãƒ‰ -->
                    <div class="tifo-card text-center">
                        <h3 class="text-lg font-bold text-stone-600 mb-2">å…¨å›ç­”æ•°</h3>
                        <p id="total-answers" class="text-6xl font-bold text-orange-500"></p>
                        <div id="answer-trend" class="text-sm mt-2 flex items-center justify-center"></div>
                        <p id="total-answers-rank" class="text-sm text-stone-500 mt-3"></p>
                    </div>
                    <!-- NPSã‚«ãƒ¼ãƒ‰ -->
                    <div class="tifo-card text-center">
                        <h3 class="text-lg font-bold text-stone-600 mb-2">â¤ï¸ NPS (é¡§å®¢æ¨å¥¨åº¦)</h3>
                         <p id="nps-score" class="text-6xl font-bold text-orange-500"></p>
                        <p class="text-xs text-stone-500">(-100 ~ 100ã®ç¯„å›²)</p>
                        <div class="w-full mt-3 relative">
                           <div class="nps-bar-container">
                               <div class="nps-bar-marker"></div>
                               <div id="nps-bar-value" class="nps-bar-value"></div>
                           </div>
                        </div>
                        <p id="nps-rank" class="text-sm text-stone-500 mt-3"></p>
                    </div>
                </div>

                <h2 class="text-2xl font-bold mb-4 flex items-center">â­ å„ç¨®æº€è¶³åº¦ã‚¹ã‚³ã‚¢</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                     <!-- å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹æº€è¶³åº¦ -->
                    <div class="tifo-card text-center">
                        <h3 class="text-lg font-bold text-stone-600 mb-2">ğŸ å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹</h3>
                        <div class="flex items-baseline justify-center">
                            <p id="product-satisfaction" class="text-5xl font-bold text-orange-500"></p>
                            <span class="text-2xl font-bold text-stone-500">/ 5.0</span>
                        </div>
                        <div class="w-full progress-bar-bg mt-3">
                            <div id="product-satisfaction-bar" class="progress-bar"></div>
                        </div>
                        <p id="product-satisfaction-rank" class="text-sm text-stone-500 mt-3"></p>
                    </div>
                    <!-- æ–½è¨­å…¨ä½“æº€è¶³åº¦ -->
                    <div class="tifo-card text-center">
                        <h3 class="text-lg font-bold text-stone-600 mb-2">ğŸ¨ æ–½è¨­å…¨ä½“</h3>
                        <div class="flex items-baseline justify-center">
                            <p id="facility-satisfaction" class="text-5xl font-bold text-orange-500"></p>
                            <span class="text-2xl font-bold text-stone-500">/ 5.0</span>
                        </div>
                        <div class="w-full progress-bar-bg mt-3">
                            <div id="facility-satisfaction-bar" class="progress-bar"></div>
                        </div>
                        <p id="facility-satisfaction-rank" class="text-sm text-stone-500 mt-3"></p>
                    </div>
                    <!-- æ—…å…¨ä½“æº€è¶³åº¦ -->
                    <div class="tifo-card text-center">
                        <h3 class="text-lg font-bold text-stone-600 mb-2">ğŸš— æ—…å…¨ä½“</h3>
                        <div class="flex items-baseline justify-center">
                            <p id="trip-satisfaction" class="text-5xl font-bold text-orange-500"></p>
                            <span class="text-2xl font-bold text-stone-500">/ 5.0</span>
                        </div>
                        <div class="w-full progress-bar-bg mt-3">
                            <div id="trip-satisfaction-bar" class="progress-bar"></div>
                        </div>
                        <p id="trip-satisfaction-rank" class="text-sm text-stone-500 mt-3"></p>
                    </div>
                </div>
            </section>

            <!-- ãƒ©ãƒ³ã‚­ãƒ³ã‚°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
            <section>
                <h2 class="text-2xl font-bold mb-4 flex items-center">ğŸ† ã‚°ãƒ«ãƒ¼ãƒ—åˆ¥ æ¥è¨ªè€…TOP5</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="tifo-card">
                        <h3 class="text-lg font-bold text-stone-600 mb-4">ï¿½ å¹´ä»£</h3>
                        <ul id="age-ranking" class="space-y-3"></ul>
                    </div>
                    <div class="tifo-card">
                        <h3 class="text-lg font-bold text-stone-600 mb-4">ğŸš» æ€§åˆ¥</h3>
                        <ul id="gender-ranking" class="space-y-3"></ul>
                    </div>
                    <div class="tifo-card">
                        <h3 class="text-lg font-bold text-stone-600 mb-4">ğŸŒ™ å®¿æ³Šæ—¥æ•°</h3>
                        <ul id="stay-duration-ranking" class="space-y-3"></ul>
                    </div>
                    <div class="tifo-card">
                        <h3 class="text-lg font-bold text-stone-600 mb-4">ğŸ‘¥ åŒä¼´è€…</h3>
                        <ul id="companion-ranking" class="space-y-3"></ul>
                    </div>
                    <div class="tifo-card col-span-1 md:col-span-2">
                        <h3 class="text-lg font-bold text-stone-600 mb-4">âœˆï¸ æ—…ã®ç›®çš„</h3>
                        <ul id="purpose-ranking" class="space-y-3"></ul>
                    </div>
                </div>
            </section>
        </main>
    </div>

<script>
document.addEventListener('DOMContentLoaded', async () => {
    // --- Global state ---
    let surveyData = [];

    // --- DOM Element Setup ---
    const homeScreen = document.getElementById('home-screen');
    const analysisScreen = document.getElementById('analysis-screen');
    const facilitySelect = document.getElementById('facility-select');
    const analyzeButton = document.getElementById('analyze-button');
    const backButton = document.getElementById('back-button');
    const loadingMessage = document.getElementById('loading-message');
    const mainContent = document.getElementById('main-content');
    
    // --- CSV Parsing Function ---
    function parseCSV(text) {
        // Handle potential UTF-8 BOM at the start of the file
        if (text.charCodeAt(0) === 0xFEFF) {
            text = text.slice(1);
        }
        const lines = text.trim().split(/\r?\n/);
        const headers = lines[0].split(',').map(h => h.trim());
        
        return lines.slice(1).map(line => {
            // This regex handles commas inside quoted fields
            const values = line.match(/(".*?"|[^",]+)(?=\s*,|\s*$)/g) || [];
            const obj = {};
            headers.forEach((header, i) => {
                let value = (values[i] || '').trim();
                // Remove quotes if value is quoted
                if (value.startsWith('"') && value.endsWith('"')) {
                    value = value.slice(1, -1);
                }

                // Try to convert to number if it's a valid numeric string
                const numValue = Number(value);
                if (value !== '' && !isNaN(numValue)) {
                    obj[header] = numValue;
                } else {
                    // Keep as string, or null if empty
                    obj[header] = value === '' ? null : value;
                }
            });
            return obj;
        });
    }

    // --- Data Loading ---
    async function loadData() {
        try {
            // CORRECTED FILENAME
            const response = await fetch('milii_score.csv');
            if (!response.ok) {
                throw new Error(`CSV file not found or failed to load: ${response.status} ${response.statusText}`);
            }
            const csvText = await response.text();
            surveyData = parseCSV(csvText);
            
            // --- Initial Setup after data load ---
            // Sort data by facility name for consistent dropdown order
            surveyData.sort((a, b) => a.æ–½è¨­.localeCompare(b.æ–½è¨­));

            surveyData.forEach(data => {
                const option = document.createElement('option');
                option.value = data.æ–½è¨­;
                option.textContent = data.æ–½è¨­;
                facilitySelect.appendChild(option);
            });

            loadingMessage.classList.add('hidden');
            mainContent.classList.remove('hidden');

        } catch (error) {
            console.error("Error loading or parsing CSV:", error);
            loadingMessage.innerHTML = `<p class="text-red-500 font-bold">ã‚¨ãƒ©ãƒ¼: ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚¡ã‚¤ãƒ«ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p><p class="text-sm mt-2">ãƒ•ã‚¡ã‚¤ãƒ«åãŒ 'milii_score.csv' ã§ã‚ã‚‹ã“ã¨ã€<br>index.html ã¨åŒã˜å ´æ‰€ã«ã‚ã‚‹ã“ã¨ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚</p>`;
        }
    }

    // --- Event Listeners ---
    analyzeButton.addEventListener('click', () => {
        const selectedFacilityName = facilitySelect.value;
        const facilityData = surveyData.find(d => d.æ–½è¨­ === selectedFacilityName);
        if (facilityData) {
            displayAnalysis(facilityData);
            homeScreen.classList.add('hidden');
            analysisScreen.classList.remove('hidden');
            window.scrollTo(0, 0);
        }
    });

    backButton.addEventListener('click', () => {
        homeScreen.classList.remove('hidden');
        analysisScreen.classList.add('hidden');
    });

    // --- Helper Functions ---
    function getRank(value, dataKey) {
        if (value === null || value === undefined) {
            return { rank: 'N/A', total: surveyData.length };
        }
        const sortedValues = surveyData
            .map(d => d[dataKey] ?? -Infinity) // Use ?? for nullish coalescing
            .sort((a, b) => b - a);
        const rank = sortedValues.indexOf(value) + 1;
        return { rank, total: surveyData.length };
    }
    
    function updateSatisfactionCard(idPrefix, score, dataKey) {
        const scoreValue = score ?? 0; // Use 0 if score is null/undefined
        document.getElementById(`${idPrefix}`).textContent = scoreValue.toFixed(2);
        document.getElementById(`${idPrefix}-bar`).style.width = `${(scoreValue / 5) * 100}%`;
        const rankInfo = getRank(score, dataKey);
        document.getElementById(`${idPrefix}-rank`).textContent = `(å…¨${rankInfo.total}æ–½è¨­ä¸­ ${rankInfo.rank}ä½)`;
    }
    
    function getTopN(groups, n) {
        return Object.entries(groups)
            .filter(([key, value]) => value > 0)
            .sort(([, a], [, b]) => b - a)
            .slice(0, n);
    }

    function renderRankingList(elementId, topData) {
        const listElement = document.getElementById(elementId);
        listElement.innerHTML = '';
        if (topData.length === 0) {
            listElement.innerHTML = '<li class="text-stone-500">è©²å½“ãƒ‡ãƒ¼ã‚¿ãªã—</li>';
            return;
        }
        topData.forEach(([key, value], index) => {
            const percentage = (value * 100).toFixed(1);
            const li = document.createElement('li');
            li.className = 'flex items-center text-stone-700';
            li.innerHTML = `
                <span class="rank-badge rank-${index + 1}">${index + 1}</span>
                <span class="ml-3 flex-1">${key}</span>
                <span class="font-bold">${percentage}%</span>
            `;
            listElement.appendChild(li);
        });
    }

    // --- Main Display Function ---
    function displayAnalysis(data) {
        document.getElementById('facility-title').textContent = `${data.æ–½è¨­} ã®åˆ†æçµæœ`;
        
        // --- Score Cards ---
        document.getElementById('total-answers').textContent = data.å…¨å›ç­”æ•° ?? 'N/A';
        const trendEl = document.getElementById('answer-trend');
        const trend = data['ä¼¸ã³ç‡ï¼ˆå¯¾å‰æœˆï¼‰'];
        if (trend === null || trend === undefined) {
             trendEl.innerHTML = `â–¶ï¸ <span class="text-gray-600 font-bold ml-1">å‰æœˆæ¯” N/A</span>`;
        } else if (trend > 0) {
            trendEl.innerHTML = `ğŸ”¼ <span class="text-green-600 font-bold ml-1">å‰æœˆæ¯” +${(trend * 100).toFixed(1)}%</span>`;
        } else if (trend < 0) {
            trendEl.innerHTML = `ğŸ”½ <span class="text-red-600 font-bold ml-1">å‰æœˆæ¯” ${(trend * 100).toFixed(1)}%</span>`;
        } else {
            trendEl.innerHTML = `â–¶ï¸ <span class="text-gray-600 font-bold ml-1">å‰æœˆæ¯” Â±0%</span>`;
        }
        const answersRank = getRank(data.å…¨å›ç­”æ•°, 'å…¨å›ç­”æ•°');
        document.getElementById('total-answers-rank').textContent = `(å…¨${answersRank.total}æ–½è¨­ä¸­ ${answersRank.rank}ä½)`;

        const nps = data.NPS;
        const npsScore = nps !== null ? (nps * 100).toFixed(1) : 'N/A';
        document.getElementById('nps-score').textContent = npsScore;
        const normalizedNpsPercent = nps !== null ? (nps * 100 + 100) / 2 : 50; // Default to center if no data
        document.getElementById('nps-bar-value').style.left = `calc(${normalizedNpsPercent}% - 0.375rem)`;
        const npsRank = getRank(data.NPS, 'NPS');
        document.getElementById('nps-rank').textContent = `(å…¨${npsRank.total}æ–½è¨­ä¸­ ${npsRank.rank}ä½)`;

        updateSatisfactionCard('product-satisfaction', data['å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹æº€è¶³åº¦'], 'å•†å“ãƒ»ã‚µãƒ¼ãƒ“ã‚¹æº€è¶³åº¦');
        updateSatisfactionCard('facility-satisfaction', data['æ–½è¨­å…¨ä½“æº€è¶³åº¦'], 'æ–½è¨­å…¨ä½“æº€è¶³åº¦');
        updateSatisfactionCard('trip-satisfaction', data['æ—…å…¨ä½“æº€è¶³åº¦'], 'æ—…å…¨ä½“æº€è¶³åº¦');

        // --- Ranking Lists ---
        const ageGroups = { '10ä»£': data['10ä»£'], '20ä»£': data['20ä»£'], '30ä»£': data['30ä»£'], '40ä»£': data['40ä»£'], '50ä»£': data['50ä»£'], '60ä»£': data['60ä»£'], '70ä»£': data['70ä»£'], '80ä»£': data['80ä»£'] };
        const genderGroups = { 'ç”·æ€§': data['ç”·æ€§'], 'å¥³æ€§': data['å¥³æ€§'] };
        const stayDurationGroups = { 'æ—¥å¸°ã‚Š': data['æ—¥å¸°ã‚Š'], '1æ³Š': data['1æ³Š'], '2æ³Š': data['2æ³Š'], '3æ³Š': data['3æ³Š'], '4æ³Šä»¥ä¸Š': data['4æ³Šä»¥ä¸Š'] };
        const companionGroups = { 'ã²ã¨ã‚Šæ—…': data['è‡ªåˆ†ã²ã¨ã‚Š'], 'æ‹äººã¨': data['æ‹äºº'], 'å‹äººã¨': data['å‹äºº'], 'å¤«å©¦2äºº': data['å¤«å©¦2äºº'], 'å›£ä½“æ—…è¡Œ': data['å›£ä½“æ—…è¡Œ'], 'è¦ªæˆšã¨': data['è¦ªæˆš'], 'è¦ªã¨': data['è¦ª'], 'è·å ´ã®åŒåƒšã¨': data['è·å ´ã®åŒåƒš'], 'å®¶æ—(å°å­¦ç”Ÿä»¥ä¸‹)': data['å°å­¦ç”Ÿä»¥ä¸‹é€£ã‚Œã®å®¶æ—'], 'å®¶æ—(ä¸­å­¦ç”Ÿ)': data['ä¸­å­¦ç”Ÿä»¥ä¸‹é€£ã‚Œã®å®¶æ—'], 'å®¶æ—(é«˜æ ¡ç”Ÿ)': data['é«˜æ ¡ç”Ÿé€£ã‚Œã®å®¶æ—'] };
        const purposeGroups = { 'å®¿ã§ã®ã‚“ã³ã‚Š': data['å®¿ã§ã®ã‚“ã³ã‚Šéã”ã™'], 'æ¸©æ³‰': data['æ¸©æ³‰ã‚„éœ²å¤©é¢¨å‘‚'], 'ã‚°ãƒ«ãƒ¡': data['åœ°å…ƒã®ç¾å‘³ã—ã„ã‚‚ã®ã‚’é£Ÿã¹ã‚‹'], 'è‡ªç„¶é‘‘è³': data['èŠ±è¦‹ã‚„ç´…è‘‰ãªã©ã®è‡ªç„¶é‘‘è³'], 'åæ‰€ãƒ»æ—§è·¡è¦³å…‰': data['åæ‰€ã€æ—§è·¡ã®è¦³å…‰'], 'ãƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯': data['ãƒ†ãƒ¼ãƒãƒ‘ãƒ¼ã‚¯ï¼ˆéŠåœ’åœ°ã€å‹•ç‰©åœ’ã€åšç‰©é¤¨ãªã©ï¼‰'], 'è²·ã„ç‰©': data['è²·ã„ç‰©ã€ã‚¢ã‚¦ãƒˆãƒ¬ãƒƒãƒˆ'], 'ã‚¤ãƒ™ãƒ³ãƒˆ': data['ãŠç¥­ã‚Šã‚„ã‚¤ãƒ™ãƒ³ãƒˆã¸ã®å‚åŠ ãƒ»è¦‹ç‰©'], 'é‘‘è³': data['ã‚¹ãƒãƒ¼ãƒ„è¦³æˆ¦ã‚„èŠ¸èƒ½é‘‘è³ï¼ˆã‚³ãƒ³ã‚µãƒ¼ãƒˆç­‰ï¼‰'], 'ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢': data['ã‚¢ã‚¦ãƒˆãƒ‰ã‚¢ï¼ˆæµ·æ°´æµ´ã€é‡£ã‚Šã€ç™»å±±ãªã©ï¼‰'], 'ã¾ã¡ã‚ã‚‹ã': data['ã¾ã¡ã‚ã‚‹ãã€éƒ½å¸‚æ•£ç­–'], 'ä½“é¨“': data['å„ç¨®ä½“é¨“ï¼ˆæ‰‹ä½œã‚Šã€æœç‰©ç‹©ã‚Šãªã©ï¼‰'], 'ã‚¹ãƒãƒ¼ãƒ„': data['ã‚¹ã‚­ãƒ¼ãƒ»ã‚¹ãƒãƒœã€ãƒãƒªãƒ³ã‚¹ãƒãƒ¼ãƒ„'] || data['ãã®ä»–ã‚¹ãƒãƒ¼ãƒ„ï¼ˆã‚´ãƒ«ãƒ•ã€ãƒ†ãƒ‹ã‚¹ãªã©ï¼‰'], 'ãƒ‰ãƒ©ã‚¤ãƒ–': data['ãƒ‰ãƒ©ã‚¤ãƒ–ãƒ»ãƒ„ãƒ¼ãƒªãƒ³ã‚°'], 'çŸ¥äººè¨ªå•': data['å‹äººãƒ»è¦ªæˆšã‚’å°‹ã­ã‚‹'], 'ä»•äº‹é–¢ä¿‚': data['å‡ºå¼µãªã©ä»•äº‹é–¢ä¿‚'] };

        renderRankingList('age-ranking', getTopN(ageGroups, 5));
        renderRankingList('gender-ranking', getTopN(genderGroups, 5));
        renderRankingList('stay-duration-ranking', getTopN(stayDurationGroups, 5));
        renderRankingList('companion-ranking', getTopN(companionGroups, 5));
        renderRankingList('purpose-ranking', getTopN(purposeGroups, 5));
    }

    // --- Start the application ---
    loadData();
});
</script>

</body>
</html>
ï¿½
